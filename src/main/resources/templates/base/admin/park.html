<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9" lang=""> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->

<head>
    <title>停车场管理</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Sufee Admin - HTML5 Admin Template</title>
    <meta name="description" content="Sufee Admin - HTML5 Admin Template">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="apple-touch-icon" href="apple-icon.png">
    <link rel="shortcut icon" href="../../static/user/favicon.ico">
    <link rel="stylesheet" href="../../static/user/vendors/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../static/user/vendors/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="../../static/user/vendors/themify-icons/css/themify-icons.css">
    <link rel="stylesheet" href="../../static/user/vendors/flag-icon-css/css/flag-icon.min.css">
    <link rel="stylesheet" href="../../static/user/vendors/datatables.net-bs4/css/dataTables.bootstrap4.min.css">
    <link rel="stylesheet" href="../../static/user/vendors/datatables.net-buttons-bs4/css/buttons.bootstrap4.min.css">

    <link rel="stylesheet" href="../../static/user/assets/css/style.css">

    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,600,700,800' rel='stylesheet' type='text/css'>
</head>

<body>
<!-- Left Panel -->

<aside id="navbar" class="left-panel">
</aside><!-- /#left-panel -->

<!-- Left Panel -->

<!-- Right Panel -->

<div id="right-panel" class="right-panel">

    <!-- Header-->
    <header id="header" class="header">
    </header><!-- /header -->
    <!-- Header-->


    <div class="content mt-3">
        <div class="animated fadeIn">
            <div class="row">

                <div class="col-md-12">
                    <div class="card">
                        <div class="card-header">
                            <strong class="card-title">停车场管理</strong>
<!--                            添加按钮-->
                            <button style="float: right; background-color: transparent" data-toggle='modal' data-target='#exampleModalCenter' onclick="showDiv(null,'add')"><svg  class="bi bi-person-plus-fill" width="2em" height="2em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" d="M1 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zm5-6a3 3 0 100-6 3 3 0 000 6zm7.5-3a.5.5 0 01.5.5v2a.5.5 0 01-.5.5h-2a.5.5 0 010-1H13V5.5a.5.5 0 01.5-.5z" clip-rule="evenodd"/>
                            <path fill-rule="evenodd" d="M13 7.5a.5.5 0 01.5-.5h2a.5.5 0 010 1H14v1.5a.5.5 0 01-1 0v-2z" clip-rule="evenodd"/>
                            </svg></button>
                        </div>
                        <div class="card-body">
                            <table id="bootstrap-data-table-export" class="table table-striped table-bordered">
                                <thead>
                                <tr>
                                    <th>停车场名</th>
                                    <th>剩余空位</th>
                                    <th>总空位</th>
                                    <th>收费单价</th>
                                    <th>操作</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td>Jena Gaines</td>
                                    <td>Office Manager</td>
                                    <td>London</td>
                                    <td>$90,560</td>
                                </tr>
                                <tr>
                                    <td>Quinn Flynn</td>
                                    <td>Support Lead</td>
                                    <td>Edinburgh</td>
                                    <td>$342,000</td>
                                </tr>
                                <tr>
                                    <td>Charde Marshall</td>
                                    <td>Regional Director</td>
                                    <td>San Francisco</td>
                                    <td>$470,600</td>
                                </tr>
                                <tr>
                                    <td>Haley Kennedy</td>
                                    <td>Senior Marketing Designer</td>
                                    <td>London</td>
                                    <td>$313,500</td>
                                </tr>
                                <tr>
                                    <td>Tatyana Fitzpatrick</td>
                                    <td>Regional Director</td>
                                    <td>London</td>
                                    <td>$385,750</td>
                                </tr>
                                <tr>
                                    <td>Michael Silva</td>
                                    <td>Marketing Designer</td>
                                    <td>London</td>
                                    <td>$198,500</td>
                                </tr>
                                <tr>
                                    <td>Paul Byrd</td>
                                    <td>Chief Financial Officer (CFO)</td>
                                    <td>New York</td>
                                    <td>$725,000</td>
                                </tr>
                                <tr>
                                    <td>Dai Rios</td>
                                    <td>Personnel Lead</td>
                                    <td>Edinburgh</td>
                                    <td>$217,500</td>
                                </tr>
                                <tr>
                                    <td>Jenette Caldwell</td>
                                    <td>Development Lead</td>
                                    <td>New York</td>
                                    <td>$345,000</td>
                                </tr>
                                <tr>
                                    <td>Yuri Berry</td>
                                    <td>Chief Marketing Officer (CMO)</td>
                                    <td>New York</td>
                                    <td>$675,000</td>
                                </tr>
                                <tr>
                                    <td>Caesar Vance</td>
                                    <td>Pre-Sales Support</td>
                                    <td>New York</td>
                                    <td>$106,450</td>
                                </tr>
                                <tr>
                                    <td>Brenden Wagner</td>
                                    <td>Software Engineer</td>
                                    <td>San Francisco</td>
                                    <td>$206,850</td>
                                </tr>
                                <tr>
                                    <td>Fiona Green</td>
                                    <td>Chief Operating Officer (COO)</td>
                                    <td>San Francisco</td>
                                    <td>$850,000</td>
                                </tr>
                                <tr>
                                    <td>Shou Itou</td>
                                    <td>Regional Marketing</td>
                                    <td>Tokyo</td>
                                    <td>$163,000</td>
                                </tr>
                                <tr>
                                    <td>Michelle House</td>
                                    <td>Integration Specialist</td>
                                    <td>Sidney</td>
                                    <td>$95,400</td>
                                </tr>
                                <tr>
                                    <td>Suki Burks</td>
                                    <td>Developer</td>
                                    <td>London</td>
                                    <td>$114,500</td>
                                </tr>
                                <tr>
                                    <td>Prescott Bartlett</td>
                                    <td>Technical Author</td>
                                    <td>London</td>
                                    <td>$145,000</td>
                                </tr>
                                <tr>
                                    <td>Gavin Cortez</td>
                                    <td>Team Leader</td>
                                    <td>San Francisco</td>
                                    <td>$235,500</td>
                                </tr>
                                <tr>
                                    <td>Martena Mccray</td>
                                    <td>Post-Sales support</td>
                                    <td>Edinburgh</td>
                                    <td>$324,050</td>
                                </tr>
                                <tr>
                                    <td>Unity Butler</td>
                                    <td>Marketing Designer</td>
                                    <td>San Francisco</td>
                                    <td>$85,675</td>
                                </tr>
                                <tr>
                                    <td>Howard Hatfield</td>
                                    <td>Office Manager</td>
                                    <td>San Francisco</td>
                                    <td>$164,500</td>
                                </tr>
                                <tr>
                                    <td>Hope Fuentes</td>
                                    <td>Secretary</td>
                                    <td>San Francisco</td>
                                    <td>$109,850</td>
                                </tr>
                                <tr>
                                    <td>Vivian Harrell</td>
                                    <td>Financial Controller</td>
                                    <td>San Francisco</td>
                                    <td>$452,500</td>
                                </tr>
                                <tr>
                                    <td>Timothy Mooney</td>
                                    <td>Office Manager</td>
                                    <td>London</td>
                                    <td>$136,200</td>
                                </tr>
                                <tr>
                                    <td>Jackson Bradshaw</td>
                                    <td>Director</td>
                                    <td>New York</td>
                                    <td>$645,750</td>
                                </tr>
                                <tr>
                                    <td>Olivia Liang</td>
                                    <td>Support Engineer</td>
                                    <td>Singapore</td>
                                    <td>$234,500</td>
                                </tr>
                                <tr>
                                    <td>Bruno Nash</td>
                                    <td>Software Engineer</td>
                                    <td>London</td>
                                    <td>$163,500</td>
                                </tr>
                                <tr>
                                    <td>Sakura Yamamoto</td>
                                    <td>Support Engineer</td>
                                    <td>Tokyo</td>
                                    <td>$139,575</td>
                                </tr>
                                <tr>
                                    <td>Thor Walton</td>
                                    <td>Developer</td>
                                    <td>New York</td>
                                    <td>$98,540</td>
                                </tr>
                                <tr>
                                    <td>Finn Camacho</td>
                                    <td>Support Engineer</td>
                                    <td>San Francisco</td>
                                    <td>$87,500</td>
                                </tr>
                                <tr>
                                    <td>Michael Bruce</td>
                                    <td>Javascript Developer</td>
                                    <td>Singapore</td>
                                    <td>$183,000</td>
                                </tr>
                                <tr>
                                    <td>Donna Snider</td>
                                    <td>Customer Support</td>
                                    <td>New York</td>
                                    <td>$112,000</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>


            </div>
        </div><!-- .animated -->
    </div><!-- .content -->


</div><!-- /#right-panel -->

<!--    修改弹窗-->
<div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalCenterTitle"></h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="form-group">
                        <label for="showDivparkingName">停车场名</label>
                        <input type="text" class="form-control" id="showDivparkingName">
                    </div>
                    <div class="form-group">
                        <label for="showDivfreeCarport">剩余空位</label>
                        <input type="text" class="form-control" id="showDivfreeCarport">
                    </div>
                    <div class="form-group">
                        <label for="parkingCarportSize">总车位数</label>
                        <input class="form-control" type="text" id="parkingCarportSize">
                    </div>
                    <div>
                        <label for="parkingPrice">收费单价</label>
                        <input type="text" class="form-control" id="parkingPrice">
                    </div>
                    <input type="text" style="display: none" id="showDivUserId">
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary" onclick="updateSave()">保存</button>
            </div>
        </div>
    </div>
</div>

<!-- Right Panel -->


<script src="../../static/user/vendors/jquery/dist/jquery.min.js"></script>
<script src="../../static/user/vendors/popper.js/dist/umd/popper.min.js"></script>
<script src="../../static/user/vendors/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="../../static/user/assets/js/main.js"></script>


<script src="../../static/user/vendors/datatables.net/js/jquery.dataTables.min.js"></script>
<script src="../../static/user/vendors/datatables.net-bs4/js/dataTables.bootstrap4.min.js"></script>
<script src="../../static/user/vendors/datatables.net-buttons/js/dataTables.buttons.min.js"></script>
<script src="../../static/user/vendors/datatables.net-buttons-bs4/js/buttons.bootstrap4.min.js"></script>
<script src="../../static/user/vendors/jszip/dist/jszip.min.js"></script>
<script src="../../static/user/vendors/pdfmake/build/pdfmake.min.js"></script>
<script src="../../static/user/vendors/pdfmake/build/vfs_fonts.js"></script>
<script src="../../static/user/vendors/datatables.net-buttons/js/buttons.html5.min.js"></script>
<script src="../../static/user/vendors/datatables.net-buttons/js/buttons.print.min.js"></script>
<script src="../../static/user/vendors/datatables.net-buttons/js/buttons.colVis.min.js"></script>
<script src="../../static/user/assets/js/init-scripts/data-table/datatables-init-park.js"></script>

<script src="http://apps.bdimg.com/libs/jquery/1.6.4/jquery.min.js"></script>
<script>
    $("#navbar").load("../base/admin/navbar.html");
    $("#header").load("../base/admin/base_right_header.html");
</script>

<script>
    //保存修改
    function updateSave() {
        var parkingId = $("#showDivparkingId").val();
        if(parkingId != null){
            //保存数据
            //获取值
            var parkingName = $("#showDivparkingName").val();
            var userStatus = $("#showDivUserStatus").val();
            var parkingCarportSize = $("#showDivparkingCarportSize").val();
            var parkingPrice = $("#showDivparkingPrice").val();
            //发送请求
            var url="/user/updateUser";
            $.post(url,{parkingId:parkingId,parkingCarportSize:parkingCarportSize,parkingPrice:parkingPrice,parkingName:parkingName},
                function (data) {
                    //回调方法
                    if(data.status){
                        //修改成功
                        alert("修改成功");
                        //刷新页面
                        location.reload();
                    }else {
                        alert("修改失败")
                    }
                },"json"
            );
        }else{
            //获取值
            var userRole = $("#showDivUserRole").val();
            var userStatus = $("#showDivUserStatus").val();
            var username = $("#showDivUsername").val();
            var balance = $("#showDivBalance").val();
            //发送请求
            var url="/user/register";
            $.post(url,{userId:parkingId,roleId:userRole,status:userStatus,balance:balance,username:username},
                function (data) {
                    //回调方法
                    if(data.status){
                        //修改成功
                        alert("添加成功");
                        //刷新页面
                        location.reload();
                    }else {
                        alert("添加失败")
                    }
                },"json"
            );
        }


    }
    // 打开弹窗
    function showDiv( row , methodType )  {
        console.log(row);
        console.log(methodType);
        $("#showDivUsername").val("");
        $("#showDivUserRole").val("");
        $("#showDivBalance").val("");
        $("#showDivUserStatus").val("");
        $("#showDivUserId").val("");
        if(methodType=="add"){
            //添加
            $("#exampleModalCenterTitle").text("添加用户或管理员");

        }else {
            //修改
            $("#showDivUsername").val(row.username);
            $("#showDivUserRole").val(row.roleId);
            $("#showDivBalance").val(row.balance);
            $("#showDivUserStatus").val(row.status);
            $("#showDivUserId").val(row.userId);
            //禁用用户名和余额
            $("#showDivBalance").attr({disabled:"true"});
            $("#showDivUsername").attr({disabled: "true"});

            $("#exampleModalCenterTitle").text("修改个人信息");
        }
        $("#updateOrAddDiv").show();
    }
</script>
</body>

</html>
